function writeResponse(e,n,a){n.setHeader("Access-Control-Allow-Origin","*"),n.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),n.setHeader("Access-Control-Allow-Headers","Content-Type, x-xsrf-token"),n.end(a||"Hello, Ã©n vagyok a szerver")}function handlePost(e,n){var a="";e.on("data",function(e){a+=e}),e.on("end",function(){console.log(a),fs.writeFileSync("products.json",a)}),writeResponse(e,n)}function handleGet(e,n){var a=getQuery(e.url),o=fs.readFileSync("products.json","utf8");o=JSON.parse(o);var i=[];for(var l in o)o[l].id==a.id&&i.push(o[l]);console.log(o),writeResponse(e,n,JSON.stringify(i))}function getQuery(e){return url.parse(e,!0).query}var http=require("http"),fs=require("fs"),url=require("url"),app=http.createServer(function(e,n){switch(e.method.toLowerCase()){case"post":handlePost(e,n);break;case"get":handleGet(e,n);break;default:writeResponse(e,n)}}).listen("3333");console.log("Server run in 3333 port.");